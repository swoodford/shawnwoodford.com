function $(t){return document.getElementById(t)}function XLSF(t,s){function i(t,s,i,e,n,o){var h=this;this.o=r.oExplosionFrag.cloneNode(!0),this.nType=t,this.sClass=s,this.x=i,this.y=e,this.w=50,this.h=50,this.bgBaseX=0,this.bgBaseY=this.h*this.nType,this.vX=n*(1.5+Math.random()),this.vY=o*(1.5+Math.random()),this.oA=null,this.oA2=null,this.burstPhase=1,this.burstPhases=4,this.o.style.backgroundPosition=this.w*-this.burstPhase+"px "+this.h*-t+"px","left"==h.sClass?this.vX=Math.abs(this.vX):"right"==h.sClass&&(this.vX=-1*Math.abs(this.vX)),this.burstTween=function(){var s=1+Math.floor(this.currentFrame/this.totalFrames*h.burstPhases);s!=h.burstPhase&&(h.burstPhase=s,h.o.style.backgroundPosition=h.w*-h.burstPhase+"px "+h.h*-t+"px")},this.burst=function(){h.oA=new Y.A(h.o,{marginLeft:{to:8*h.vX},marginTop:{to:8*h.vY}},u,Y.UE.easeOutStrong),h.oA.onTween.subscribe(h.burstTween),h.oA.animate()},this.hide=function(){a||(h.o.style.opacity=0)},this.reset=function(){h.o.style.left="0px",h.o.style.top="0px",h.o.style.marginLeft="0px",h.o.style.marginTop="0px",a||(h.o.style.opacity=1)},this.animate=function(){h.reset(),h.burst()}}function e(t,s,e,n){var o=this;this.o=null,this.nType=t,this.sClass=s,this.x=e,this.y=n,this.boxVX=0,this.boxVY=0,this.o=r.oExplosionBox.cloneNode(!0),this.o.style.left=e+"px",this.o.style.top=n+"px",this.fragments=[];var l=e,g=n;this.fragments.push(new i(t,s,l,g,-5,-5)),this.fragments.push(new i(t,s,l,g,0,-5)),this.fragments.push(new i(t,s,l,g,5,-5)),this.fragments.push(new i(t,s,l,g,-5,0)),this.fragments.push(new i(t,s,l,g,0,0)),this.fragments.push(new i(t,s,l,g,5,0)),this.fragments.push(new i(t,s,l,g,5,-5)),this.fragments.push(new i(t,s,l,g,5,0)),this.fragments.push(new i(t,s,l,g,5,5)),this.init=function(){for(var t=o.fragments.length;t--;)o.o.appendChild(o.fragments[t].o);r.oFrag.appendChild(h?o.o:o.o)},this.reset=function(){o.o.style.display="none",o.o.style.marginLeft="0px",o.o.style.marginTop="0px",o.o.style.left=o.x+"px",o.o.style.top=o.y+"px",a||(o.o.style.opacity=1);for(var t=o.fragments.length;t--;)o.fragments[t].reset()},this.trigger=function(t,s){o.o.style.display="block",o.boxVX=t,o.boxVY=s,"right"==o.sClass?o.boxVX=-1*Math.abs(o.boxVX):"left"==o.sClass&&(o.boxVX=Math.abs(o.boxVX));for(var i=o.fragments.length;i--;)o.fragments[i].animate();if(!a&&h)var e=new Y.A(o.o,{marginLeft:{to:100*o.boxVX},marginTop:{to:150*o.boxVY},opacity:{to:.01}},u,Y.UE.easeInStrong);else var e=new Y.A(o.o,{marginLeft:{to:100*o.boxVX},marginTop:{to:150*o.boxVY}},u,Y.UE.easeInStrong);e.onComplete.subscribe(o.reset),e.animate()},this.init()}function n(t,i,n,o,h){var a=this;this.o=document.createElement("div"),this.sClass=i,this.sSizeClass=t,this.nType=n||0,this.useY="left"==i||"right"==i,this.state=null,this.broken=0,this.w=r.lightClasses[t],this.h=r.lightClasses[t],this.x=o,this.y=h,this.bg=s+"image/bulbs-"+this.w+"x"+this.h+"-"+this.sClass+".png",this.o.style.width=this.w+"px",this.o.style.height=this.h+"px",this.o.style.background="url("+this.bg+") no-repeat 0px 0px",this.bgBaseX=a.useY?-a.w*this.nType:0,this.bgBaseY=a.useY?0:-a.h*this.nType,this.glassType=parseInt(6*Math.random()),this.oExplosion=null,this.soundID="smash"+this.glassType;var l=r.soundPan.panValue;this.pan=parseInt(this.x<=r.soundPan.mid?-l+this.x/r.soundPan.mid*l:(this.x-r.soundPan.mid)/(r.soundPan.right-r.soundPan.mid)*l),this.initSound=function(){},this.setBGPos=function(t,s){a.o.style.backgroundPosition=a.bgBaseX+t+"px "+(a.bgBaseY+s)+"px"},this.setLight=function(t){return a.broken||a.state==t?!1:(a.w&&a.h||a.getDimensions(),a.state=t,void(a.useY?a.setBGPos(0,-this.h*(t?0:1)):a.setBGPos(-this.w*(t?0:1),0)))},this.getDimensions=function(){a.w=a.o.offsetWidth,a.h=a.o.offsetHeight,a.bgBaseX=a.useY?-a.w*a.nType:0,a.bgBaseY=a.useY?0:-a.h*a.nType},this.on=function(){a.setLight(1)},this.off=function(){a.setLight(0)},this.flickr=function(){a.setLight(Math.random()>=.5?1:0)},this.toggle=function(){a.setLight(a.state?0:1)},this.explode=function(){a.oExplosion.trigger(0,1)},this.smash=function(t){if(a.broken)return!1;a.broken=!0,soundManager&&soundManager.ok()&&soundManager.play(a.soundID,{pan:a.pan}),a.explode(t);var s=2;a.useY?a.setBGPos(0,a.h*-s):a.setBGPos(a.w*-s,0),r.lightSmashCounter++},this.smashBonus=function(){},this.reset=function(){return a.broken?(a.broken=!1,a.state=null,r.lightSmashCounter--,void a.flickr()):!1},this.init=function(){a.o.className="xlsf-light "+this.sizeClass+" "+this.sClass,a.o.style.left=a.x+"px",a.o.style.top=a.y+"px",a.o.style.width=a.w+"px",a.o.style.height=a.h+"px",a.o.onmouseover=a.smash,a.o.onclick=a.smash,a.flickr(),r.oFrag.appendChild(a.o),a.oExplosion=new e(a.nType,a.sClass,a.x,a.y)},this.init()}var o=soundManager._wD,s=s?s:"lights/";o("XLSF()");var h=!1,a=navigator.userAgent.match(/msie/i),l=this,r=l,u=1;if(this.oFrag=document.createDocumentFragment(),this.oTarget=t?t:document.documentElement,this.oExplosionBox=document.createElement("div"),this.oExplosionBox.className="xlsf-fragment-box",this.oExplosionFrag=document.createElement("div"),this.oExplosionFrag.className="xlsf-fragment",this.lights=[],this.lightClasses={pico:32,tiny:50,small:64,medium:72,large:96},window.innerWidth||window.innerHeight)var g=window.innerWidth,m=window.innerHeight;else var g=document.documentElement.clientWidth||document.body.clientWidth||document.body.scrollWidth,m=document.documentElement.clientHeight||document.body.clientHeight||document.body.scrollHeight;this.lightClass=g>1800?"small":"pico",window.location.href.match(/size=/i)&&(this.lightClass=window.location.href.substr(window.location.href.indexOf("size=")+5)),this.lightXY=this.lightClasses[this.lightClass],this.lightGroups={left:[],top:[],right:[],bottom:[]},this.lightSmashCounter=0,this.lightIndex=0,this.lightInterval=500,this.timer=null,this.bgBaseX=0,this.bgBaseY=0,this.soundIDs=0,this.soundPan={panValue:75,left:0,mid:481,right:962},this.cover=document.createElement("div"),this.cover.className="xlsf-cover",document.documentElement.appendChild(this.cover),this.initSounds=function(){for(var t=0;6>t;t++)soundManager.createSound({id:"smash"+t,url:s+"sound/glass"+t+".mp3",autoLoad:!0,multiShot:!0,volume:50});l.initSounds=function(){}},this.appendLights=function(){o("xlsf.appendLights()"),l.oTarget.appendChild(l.oFrag),l.oFrag=document.createDocumentFragment()},this.createLight=function(t,s,i,e){var o=new n(l.lightClass,t,s,i,e);return l.lightGroups[t].push(o),l.lights.push(o),o},this.rotateLights=function(){l.lights[l.lightIndex==l.lights.length?l.lights.length-1:l.lightIndex].off(),l.lightIndex++,l.lightIndex==l.lights.length&&(l.lightIndex=0),l.lights[l.lightIndex].on()},this.randomLights=function(){l.lights[parseInt(Math.random()*l.lights.length)].toggle()},this.destroyLights=function(){l.startSequence(l.destroyLight,20)},this.destroyLight=function(){var t=2;if(l.lightSmashCounter<l.lights.length)for(var s=Math.min(l.lightSmashCounter+t,l.lights.length),i=l.lightSmashCounter;s>i;i++)l.lights[l.lightSmashCounter].smash();else l.stopSequence()},this.uberSmash=function(){l.stopSequence();Y.D.getElementsByClassName},this.smashGroup=function(t){for(var s=t.length;s--;)t[s].smash()},this.startSequence=function(t,s){l.timer&&l.stopSequence(),l.timer=window.setInterval(t,"undefined"!=typeof s?s:l.lightInterval)},this.stopSequence=function(){l.timer&&(window.clearInterval(l.timer),l.timer=null)};var d=0;$("lights").style.display="block";{var c=0,p=Math.floor((g-c-16)/l.lightXY);Math.floor((m-c-16)/l.lightXY)}for(d=0;p>d;d++)this.createLight("top",parseInt(d/3)%4,c+d*l.lightXY,0);this.appendLights(),this.startSequence(l.randomLights)}function smashInit(){return navigator.userAgent.match(/msie 6/i)?!1:(xlsf=new XLSF(document.getElementById("lights"),urlBase?urlBase:null),$("loading")&&($("loading").style.display="none"),void xlsf.initSounds())}var Y={A:YAHOO.util.Anim,D:YAHOO.util.Dom,E:YAHOO.util.Event,UE:YAHOO.util.Easing,CA:YAHOO.util.ColorAnim,BG:YAHOO.util.BgPosAnim},xlsf=null,urlBase=null;soundManager.setup({flashVersion:9,preferFlash:!1,url:"lights/",onready:function(){smashInit()},ontimeout:function(){smashInit()}});